<% title "Tags" %>

<table class="table table-striped table-hover table-condensed">
  <thead>
    <tr>
      <th>no.</th>
      <th>name</th>
      <th>description</th>
      <% if session[:user][:type_id] == 2 %>
        <th>username</th>
      <% end %>
      <th></th>
    </tr>
  </thead>
<%
n = 0
@tags.each do |tag|
  n += 1
  %>
  <tr>
    <td><%= n %></td>
    <td><%= link_to tag.name, tag %></td>
    <td><%= tag.description %></td>
    <% if session[:user][:type_id] == 2 %>
        <td><%= tag.user.username %></td>
      <% end %>
    <td>
      <%= link_to '<i class="icon-edit"></i>'.html_safe, edit_tag_path(tag), :title => 'edit' %>
      <% if tag.countExpenses == 0 %>
        <%= link_to '<i class="icon-trash"></i>'.html_safe, tag, method: :delete, data: { confirm: 'Are you sure?' }, :title => 'delete' %>
      <% else %>
        <i class="icon-lock" title="cannot be deleted (used <%= tag.countExpenses %> times)"></i>
      <% end %>
    </td>
  </tr>
<% end %>
</table>

<%= link_to '<i class="icon-pencil"></i> new tag'.html_safe, new_tag_path, :title => 'new' %>
