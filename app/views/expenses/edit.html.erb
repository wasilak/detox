<% title "Expenses" %>

<%= render 'form' %>

<div class="row-fluid">
  <div class="offset1 span10">    
    <table class="table table-striped table-hover table-condensed">
      <thead>
        <tr>
    <th><%= I18n.t 'tag name' %></th>
          <th><%= I18n.t 'budget' %></th>
          <th></th>
        </tr>
      </thead>
      <% @expenseTags.each do |expenses_tags_association| %>
      <tr>
        <%= form_tag del_tag_url(@expense), :method => 'POST', :class => 'form-inline' do %>
        <%= hidden_field :tag, 'id', :value => expenses_tags_association.id %>
        <td>
	    <% if !expenses_tags_association.nil? %>
	      <%= expenses_tags_association.tag.name %>
	    <% end %>
	    </td>
	    <td>
          <% if !expenses_tags_association.nil? %>
            <%= expenses_tags_association.tag.budget ? (I18n.t 'budget') : '' %>
          <% end %>
        </td>
        <td>
          <%= submit_tag (I18n.t 'delete'), :name => nil, :class => 'btn btn-link' %>
        </td>
        <% end %>
      </tr>
      <% end %>
      <tr>
        <%= form_tag add_tag_url(@expense), :method => 'POST', :class => 'form-inline' do %>
        <td>
          <% options = options_for_select(
            [[(I18n.t 'select')+"...",""]] +
              @tags.collect {
                |t| [t.name+(t.budget ? " ("+(I18n.t 'budget')+")" : ''), t.id]
              }
              ) %>
          <%= select_tag(:tag, options) %>
        </td>
        <td></td>
        <td>
          <%= submit_tag (I18n.t 'add'), :name => nil, :class => 'btn btn-link' %>
        </td>
        <% end %>
      </tr>
    </table>
  </div>
</div>

<p><%= link_to '<i class="icon-chevron-left"></i> '.html_safe+(I18n.t 'all expenses'), expenses_path %></p>
